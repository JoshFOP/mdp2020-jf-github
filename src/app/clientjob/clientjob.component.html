<section>
  <!-- Client Info START -->
    <h1 id="headerTitle">{{jobs[id].JobTitle}}</h1>
    <div class="ClientInfo">
      <mat-list class="ClientInfoList" >
        
        <mat-list-item class="InfoHeading">Name: </mat-list-item>
          <mat-list-item class="ClientData"> {{cs.getClientById(jobs[id].clientJob).name}} </mat-list-item>
        <mat-list-item class="InfoHeading">Phone Number: </mat-list-item>
          <mat-list-item class="ClientData">{{cs.getClientById(jobs[id].clientJob).Pnum}} </mat-list-item>

        <mat-list-item class="InfoHeading">Email: </mat-list-item>
          <mat-list-item class="ClientData">{{cs.getClientById(jobs[id].clientJob).Email}} </mat-list-item>

        <mat-list-item class="InfoHeading">Address: </mat-list-item>
          <mat-list-item class="ClientData">{{cs.getClientById(jobs[id].clientJob).Add1}} {{cs.getClientById(jobs[id].clientJob).Add2}} {{cs.getClientById(jobs[id].clientJob).city}}, {{cs.getClientById(jobs[id].clientJob).state}}, {{cs.getClientById(jobs[id].clientJob).Pcode}} </mat-list-item>

        <mat-list-item class="InfoHeading">Quote: </mat-list-item>
          <mat-list-item class="ClientData">${{jobs[id].quote}}</mat-list-item>

        <mat-list-item class="InfoHeading">Job Status: </mat-list-item>
          <mat-list-item *ngIf="jobs[id].JobStatus == true" class="JobStatusOpen">Open</mat-list-item>
          <mat-list-item *ngIf="jobs[id].JobStatus == false" class="JobStatusClosed">Closed</mat-list-item>
        
         <mat-list-item class="InfoHeading">Date Started: </mat-list-item>
          <mat-list-item class="ClientData">{{jobs[id].startDate | date :'dd/MM/yyyy'}}</mat-list-item>

        <mat-list-item class="InfoHeading">Date Due: </mat-list-item>
         <mat-list-item class="ClientData">{{jobs[id].finishDate | date :'dd/MM/yyyy'}}</mat-list-item>

        
      </mat-list>
      <br>
      <div class="ButtonDiv">
        <button mat-flat-button id="EditItem" routerLink="/editjob">Edit</button>
        <button mat-flat-button *ngIf="jobs[id].JobStatus == true" id="CloseItem" (click)="CloseJob()">Close Job</button>
        <button mat-flat-button *ngIf="jobs[id].JobStatus == false" id="ReopenItem" (click)="ReopenJob()">Reopen Job</button>
      </div>
    </div>
  <!-- Client Info END -->

  <!-- To Do List START -->
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
         <div class="PanelTitle">To Do List</div>
        </mat-panel-title>
      </mat-expansion-panel-header>
    <div class="ToDoListDiv">

      <!-- Mat-List: This is where the to do list will go -->
      <!-- SUGGESTION: Each job could have an hour counter. E.g: Fix deck - individual hours -->
      <mat-list *ngFor="let toDo of jobs[id].ToDoList; let i=index;" class="ToDoListClass">
        <mat-list-item class="ToDoListItem">{{toDo}}
        <span class="editItem">
          <mat-icon><strong>check</strong></mat-icon>
          <mat-icon (click)="editToDoList(i)">edit</mat-icon>
          <mat-icon (click)="deleteToDoList(i)">delete</mat-icon>
        </span>
        </mat-list-item>
      </mat-list>
      <!-- Mat-List END -->
      <mat-divider></mat-divider>

      <form *ngIf="!editToDoValue" (submit)="addTodo()">
        <mat-form-field class="NewItem">
          <input matInput placeholder="New Item" (keyup.enter)="newToDoItem=''" name="newToDoItem" [(ngModel)]="newToDoItem">
        </mat-form-field>

        <button mat-flat-button id="submitItem" type="submit" [disabled]="newToDoItem===''">Add</button>
      </form>

      <form *ngIf="editToDoValue" (submit)="submitEditToDoList()">
        <mat-form-field class="NewItem">
          <input matInput (keyup.enter)="toDoListEdit=''" name="toDoListEdit" [(ngModel)]="toDoListEdit">
        </mat-form-field>

        <button mat-flat-button id="submitItem" type="submit" (disabled)="toDoListEdit===''">Update</button>
      </form>
    </div>
    </mat-expansion-panel>
  </mat-accordion>
  <!-- To Do List END -->

  <br>

  <!-- Job Log START -->
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
         <div class="PanelTitle">Job Log</div>
        </mat-panel-title>
      </mat-expansion-panel-header>

    <div class="JobLogDiv">

      <!-- Mat-List: This is where the Job Log will go -->
      <mat-list *ngFor="let jobLog of jobs[id].JobLog; let i=index;" class="JobLog">
        <mat-list-item>
          <strong>{{jobLog.jobLogDate | date :'dd/MM/yyyy'}} </strong> | {{jobLog.jobLogHours + " Hours"}} | {{jobLog.jobLogItem}} 
          <span class="editItem">
            <mat-icon (click)="editJobLog(i)">edit</mat-icon>
            <mat-icon (click)="deleteJobLog(i)">delete</mat-icon>
          </span>
        </mat-list-item>
      </mat-list>

      
      <!-- Mat-List END -->
       <strong>Total Hours: </strong> {{getTotalHours()}}

      <mat-divider></mat-divider>

      <form *ngIf="!editJobLogValue" (submit)="addJobLog()">
        <span class="JobLogDH">
          <mat-form-field class="JobLogInputDate">
            <input matInput [matDatepicker]="picker" placeholder="Choose a date" [(ngModel)]="jobLogDate" (keyup.enter)="jobLogDate=''" name="jobLogDate">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker touchUi #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field class="JobLogInput">
            <input matInput type="number" placeholder="Hours" [(ngModel)]="jobLogHours" (keyup.enter)="jobLogHours=''" name="jobLogHours">
          </mat-form-field>
        </span>

        <mat-form-field class="NewItem">
          <input matInput placeholder="New Item" [(ngModel)]="jobLogItem" (keyup.enter)="jobLogItem=''" name="jobLogItem">
        </mat-form-field>

        <button mat-flat-button id="submitItem" type="submit" (disabled)="jobLogObj===''">Add</button>
      </form>

      <form *ngIf="editJobLogValue" (submit)="submitEditJobLog()">
        <span class="JobLogDH">
          <mat-form-field class="JobLogInputDate">
            <input matInput [matDatepicker]="picker" placeholder="Choose a date" [(ngModel)]="jobLogEdit.jobLogDate" (keyup.enter)="jobLogDate=''" name="jobLogDate">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker touchUi #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field class="JobLogInput">
            <input matInput type="number" placeholder="Hours" [(ngModel)]="jobLogEdit.jobLogHours" (keyup.enter)="jobLogHours=''" name="jobLogHours">
          </mat-form-field>
        </span>

        <mat-form-field class="NewItem">
          <input matInput placeholder="New Item" [(ngModel)]="jobLogEdit.jobLogItem" (keyup.enter)="jobLogItem=''" name="jobLogItem">
        </mat-form-field>

        <button mat-flat-button id="submitItem" type="submit" (disabled)="jobLogEdit===''">Update</button>
      </form>
    </div>

    </mat-expansion-panel>
  </mat-accordion>
  <!-- Job Log END -->

  <br>

<!-- Expenses START -->
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
         <div class="PanelTitle">Expenses</div>
        </mat-panel-title>
      </mat-expansion-panel-header>

    <div class="ExpensesLogDiv">

    <table mat-table [dataSource]="expensesTable" class="ExpensesTable">

  <!-- Qty Column -->
      <ng-container matColumnDef="ItemQty" >
        <th mat-header-cell *matHeaderCellDef> Qty </th>
        <td mat-cell *matCellDef="let exp"> {{exp.ItemQty}} </td>
      </ng-container>

  <!-- Item Column -->
      <ng-container matColumnDef="ItemExp">
        <th mat-header-cell *matHeaderCellDef class="tdCell"> Item </th>
        <td mat-cell *matCellDef="let exp" class="tdCell"> {{exp.ItemExp}} </td>
      </ng-container>

  <!-- Price Column -->
      <ng-container matColumnDef="ItemPrice">
        <th mat-header-cell *matHeaderCellDef class="tdCell"> Price </th>
        <td mat-cell *matCellDef="let exp" class="tdCell"> ${{exp.ItemPrice}} </td>
      </ng-container>

  <!-- Total Column -->
      <ng-container matColumnDef="TotalCost">
        <th mat-header-cell *matHeaderCellDef class="tdCell"> Total </th>
        <td mat-cell *matCellDef="let exp" class="tdCell"> ${{exp.ItemQty * exp.ItemPrice}} 

        </td>
      </ng-container>

      <ng-container matColumnDef="Edit">
        <th mat-header-cell *matHeaderCellDef class="EditCell"> Edit </th>
        <td mat-cell *matCellDef="let exp" class="EditCell">  

        <span class="editItemExp">
          <mat-icon>edit</mat-icon>
          <mat-icon>delete</mat-icon>
        </span>

        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

      <h1>Total Expenses: $24</h1>

      <mat-divider></mat-divider>

      <form *ngIf="!editExpensesValue" (submit)="addExpense()">
        <span class="ExpensesSpan">
          <mat-form-field class="QtyInput">
            <input matInput type="number" placeholder="Qty" [(ngModel)]="expenseQty" (keyup.enter)="expenseQty=''" name="expenseQty">
          </mat-form-field>

          <mat-form-field class="ItemCost">
            <input matInput type="number" placeholder="Price" [(ngModel)]="expensePrice" (keyup.enter)="expensePrice=''" name="expensePrice">
          </mat-form-field>
        </span>

        <mat-form-field class="ItemExpenses">
          <input matInput placeholder="New item" [(ngModel)]="expenseItem" (keyup.enter)="expenseItem=''" name="expenseItem">
        </mat-form-field>

        <button mat-flat-button id="submitItem" type="submit" (disabled)="expensesObj===''">Add</button>
      </form>
    </div>

    </mat-expansion-panel>
  </mat-accordion>
  <!-- Hour Counter END -->
  

</section>